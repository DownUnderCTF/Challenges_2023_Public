#include <stdio.h>
#include <stdlib.h>

char masks[26][24] = {
	{-5, 1, -2, 1, -1, 3, -3, 2, -1, 1, -1, 1, -1, 1, -1, 2, -3, 2, -2, 2, 0},
	{-1, 1, -3, 2, -3, 2, -1, 1, -2, 3, -1, 1, -1, 7, -1, 3, -1, 2, 0},
	{-1, 1, -1, 1, -1, 2, -1, 1, -6, 1, -1, 1, -2, 1, -1, 1, -1, 1, -4, 3, -1, 1, -2, 0},
	{2, -1, 5, -3, 3, -1, 4, -1, 2, -1, 5, -3, 2, -3, 0},
	{-1, 1, -3, 1, -1, 1, -2, 1, -1, 3, -1, 1, -1, 1, -2, 5, -1, 4, -1, 1, -3, 0},
	{1, -2, 2, -8, 1, -7, 2, -1, 1, -3, 1, -2, 1, -4, 0},
	{-21, 1, -14, 0},
	{-2, 3, -4, 4, -5, 1, -2, 1, -1, 1, -2, 1, -2, 1, -1, 4, -1, 0},
	{-4, 5, -3, 1, -5, 1, -3, 1, -2, 5, -4, 2, 0},
	{-1, 2, -4, 1, -1, 4, -3, 1, -4, 1, -1, 2, -1, 1, -3, 1, -1, 2, -2, 0},
	{-2, 1, -8, 1, -1, 1, -3, 1, -1, 1, -7, 1, -8, 0},
	{1, -2, 5, -1, 1, -8, 3, -2, 1, -2, 1, -3, 1, -4, 1, 0},
	{-3, 1, -9, 1, -2, 1, -17, 1, -1, 0},
	{3, -5, 4, -1, 1, -2, 1, -1, 2, -3, 3, -1, 1, -1, 3, -1, 2, -1, 0},
	{-2, 2, -3, 1, -1, 1, -1, 1, -1, 1, -7, 1, -1, 6, -1, 3, -1, 1, -1, 0},
	{1, -5, 1, -2, 2, -1, 2, -1, 1, -1, 1, -5, 1, -1, 1, -1, 5, -4, 0},
	{2, -3, 1, -5, 4, -2, 3, -2, 5, -1, 2, -1, 2, -1, 2, 0},
	{-1, 1, -3, 1, -1, 2, -2, 1, -1, 7, -2, 3, -1, 4, -1, 1, -2, 1, -1, 0},
	{2, -1, 1, -2, 2, -1, 2, -2, 5, -1, 1, -1, 2, -3, 2, -1, 1, -2, 2, -1, 1, 0},
	{1, -3, 3, -1, 1, -2, 1, -1, 6, -1, 1, -1, 2, -2, 1, -1, 1, -1, 3, -1, 2, 0},
	{-9, 1, -9, 1, -5, 1, -10, 0},
	{1, -1, 2, -2, 1, -1, 9, -1, 1, -1, 1, -7, 2, -2, 1, -2, 1, 0},
	{-1, 9, -1, 3, -1, 6, -1, 1, -1, 1, -2, 1, -3, 1, -4, 0},
	{-2, 1, -3, 1, -1, 2, -5, 6, -1, 2, -2, 4, -1, 1, -4, 0},
	{-2, 1, -4, 1, -1, 1, -2, 1, -3, 1, -3, 1, -3, 3, -6, 1, -2, 0},
	{-8, 4, -2, 2, -1, 3, -5, 1, -2, 2, -1, 1, -4, 0}
};

int outputs[26] = {1441, 2043, 1259, 2031, 1799, 746, 55, 1450, 1485, 1362, 611, 1314, 358, 1834, 1500, 1355, 2011, 1990, 1939, 1990, 278, 1859, 2111, 1510, 888, 1224};
typedef int square_t[6][6];

square_t* uncompress_mask(char c_mask[24]) {
    int i = 0;
    square_t* out = (square_t*) malloc(sizeof(square_t));
    int curr_x = 0;
    int curr_y = 0;
    while(1) {
        int v = c_mask[i++];
        if(v == 0) break;
        int z;
        if(v > 0) {
            z = 1;
        } else {
            z = 0;
            v = -v;
        }
        for(int j = 0; j < v; j++) {
            (*out)[curr_y][curr_x++] = z;
            if(curr_x == 6) {
                curr_x = 0;
                curr_y++;
            }
        }
    }
    return out;
}

int mask_sum(square_t* inp, square_t* mask) {
    int s = 0;
    for(int y = 0; y < 6; y++) {
        for(int x = 0; x < 6; x++) {
            if((*mask)[y][x]) {
                s += (*inp)[y][x];
            }
        }
    }
    return s;
}

int main() {
    printf("What is the flag? ");

    char buf[36];
    scanf("%36s", buf);

    square_t inp;
    for(int y = 0; y < 6; y++) {
        for(int x = 0; x < 6; x++) {
            inp[y][x] = buf[y*6 + x];
        }
    }

    for(int i = 0; i < 26; i++) {
        square_t* mask = uncompress_mask(masks[i]);
        int s = mask_sum(&inp, mask);
        if(s != outputs[i]) {
            puts("Incorrect!");
            exit(-1);
        }
    }

    puts("Correct!");
}
